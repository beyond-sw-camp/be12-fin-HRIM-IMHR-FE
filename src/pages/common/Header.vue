<script setup>
import { defineEmits } from 'vue'
import { useMemberStore } from '../../stores/useMemberStore'
import { useRouter } from 'vue-router'
import { Menu  } from 'lucide-vue-next'
import { Bell } from 'lucide-vue-next'

const emit = defineEmits(['toggle-sidebar'])
const memberStore = useMemberStore();

const router = useRouter()

const handleLogout = async () => {
  await memberStore.logout();
  localStorage.removeItem('accessToken')
  localStorage.removeItem('userInfo')
  router.push('/login')
}
</script>

<template>
  <header class="bg-white shadow-md w-full h-16 flex items-center px-6 fixed top-0 left-0 z-50">
    <div class="flex items-center gap-3">
      <router-link to="/" class="text-slate-800 font-bold text-2xl md:text-5xl ml-2 mb-1">IMHR</router-link>

      <button
        @click="emit('toggle-sidebar')"
        class="p-3 rounded hover:bg-slate-100 transition"
        aria-label="사이드바 열기"
      >
        <Menu class="w-11 h-11 text-slate-800 mt-0.5"/>
      </button>
    </div>

    <!-- 🔹 오른쪽 사용자 영역 -->
    <div class="flex items-center gap-4 ml-auto mr-2 mb-1">
      <router-link to="/mypage" class="text-slate-700 text-base md:text-3xl font-medium hover:underline mr-2 font-semibold">
        홍길동
      </router-link>

      <router-link to="/notifications" class="mr-2">
        <Bell class="w-7 h-7 text-slate-800 hover:opacity-80 transition"/>
      </router-link>

      <!-- 로그아웃 버튼 -->
      <button
        @click="handleLogout"
        type="button"
        class="hidden md:inline-block border-2 border-slate-800 py-1.5 px-4 text-sm text-slate-800 rounded hover:bg-slate-100 transition font-semibold"
      >
        로그아웃
      </button>
    </div>
  </header>
</template>
