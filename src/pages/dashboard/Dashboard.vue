<!-- src/pages/common/dashboard/Dashboard.vue -->
<script setup>
import { onMounted, ref } from 'vue'

import Chart from 'chart.js/auto'

// ì„ í˜• ê·¸ë˜í”„
const lineChartRef = ref(null)
// ë„ë„› ê·¸ë˜í”„ ref ì¶”ê°€
const semiDoughnutRef = ref(null)

onMounted(() => {

  // ì„ í˜• ê·¸ë˜í”„
  new Chart(lineChartRef.value, {
    type: 'line',
    data: {
      labels: ['2021', '2022.1ë¶„ê¸°', '2022.2ë¶„ê¸°', '2022.3ë¶„ê¸°', '2022'],
      datasets: [{
        data: [66, 70, 69.5, 72, 74.6],
        fill: true,
        tension: 0.3,
        borderColor: '#22d3ee',
        backgroundColor: 'rgba(34, 211, 238, 0.2)',
      }]
    },
    options: {
      maintainAspectRatio: false,
      responsive: true,
      plugins: {
        legend: { display: false },
      },
      scales: {
        y: {
          min: 60,
          max: 80,
          ticks: { stepSize: 2 }
        }
      }
    }
  })


  new Chart(semiDoughnutRef.value, {
    type: 'doughnut',
    data: {
      labels: ['ì ìˆ˜', 'ë‚¨ì€ ì˜ì—­'],
      datasets: [{
        data: [74.6, 100 - 74.6],
        backgroundColor: ['#4ade80', '#e5e7eb'], // ì´ˆë¡, íšŒìƒ‰
        borderWidth: 0,
      }]
    },
    options: {
      maintainAspectRatio: false,
      responsive: true,
      cutout: '80%',
      rotation: -90,
      circumference: 180,
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false }
      }
    }
  })



})
</script>

<template>
  <div class="p-8">
    <h1 class="text-2xl font-bold mb-4">ì¢…í•©ë¶„ì„ <span class="text-gray-500 text-base">2022</span></h1>

    <!-- ê¸°ë³¸ì •ë³´ -->
    <div class="grid grid-cols-5 gap-4 bg-white shadow p-4 mb-6 rounded">
      <div>
        <p class="text-sm text-gray-500">íšŒì‚¬</p>
        <p>í•œí™”ì‹œìŠ¤í…œ(ì£¼)</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">ë§¤ì¶œì•¡</p>
        <p>2,187,405 ë°±ë§Œì›</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">ì‚°ì—…êµ°</p>
        <p>ì‚°ì—…ìš©ìš°ì£¼í•­ê³µê³¼êµ­ë°©</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">í•´ì‹  ë¦¬í¬íŠ¸</p>
        <p>2022</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">ìƒì„±ì¼</p>
        <p>2023-03-28</p>
      </div>
    </div>

    <!-- ê·¸ë˜í”„ -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- ë„ë„› ê·¸ë˜í”„ -->
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-700 text-sm font-semibold mb-2">ESG ì§„ë‹¨ ì ìˆ˜</p>

        <!-- ë°˜ì‘í˜• ë„ë„› ê·¸ë˜í”„ (% ê¸°ì¤€) -->
        <div class="relative w-full flex justify-center items-center">
          <canvas ref="semiDoughnutRef" style="max-height: 300px;"></canvas>

          <!-- ê°€ìš´ë° ì ìˆ˜ í…ìŠ¤íŠ¸ -->
          <div class="absolute text-green-500 font-bold" style="font-size: clamp(1rem, 2vw, 1.5rem); top: 90%;">
            74.6
          </div>
        </div>

        <h2 class="mt-2 text-pink-500 text-sm">íƒ€ì—…ì²´ëŒ€ë¹„ 8.5ì  ë†’ì•„ìš”!</h2>
      </div>


      <!-- ì ìˆ˜ ë³€í™” ì¶”ì´ -->
      <div class="bg-white p-6 rounded-2xl shadow" style="height: 410px;">
        <p class="text-gray-700 font-semibold mb-2">ì ìˆ˜ ë³€í™” ì¶”ì´</p>
        <canvas ref="lineChartRef"></canvas>
      </div>
    </div>

    <!-- ì´ë‹¬ì˜ ì‚¬ì› -->
    <div class="bg-white shadow p-4 rounded mb-6">
      <h2 class="text-lg font-semibold mb-4">ì´ë‹¬ì˜ ì‚¬ì›</h2>
      <div class="flex justify-between text-center">
        <div style="display: flex; gap: 10px;">
          <div>ğŸ¥‡</div>
          <div>í™ê¸¸ë™</div>
          <div>ì½”ë©˜íŠ¸ ê°¯ìˆ˜ :</div>
          <div>100</div>
        </div>
        <div class="flex gap-2.5">
          <div>ğŸ¥ˆ</div>
          <div>ì„êº½ì •</div>
          <div>ì½”ë©˜íŠ¸ ê°¯ìˆ˜ :</div>
          <div>99</div>
        </div>
        <div class="flex gap-2.5">
          <div>ğŸ¥‰</div>
          <div>ë„ˆêµ¬ë¦¬</div>
          <div>ì½”ë©˜íŠ¸ ê°¯ìˆ˜ :</div>
          <div>98</div>
        </div>
      </div>
    </div>

    <!-- ì˜ì—­ë³„ ì ìˆ˜ -->
    <div class="grid grid-cols-3 gap-4">
      <div class="bg-green-100 p-4 rounded shadow">
        <p class="text-sm text-gray-700">ê¸°ì¤€ëŒ€ë¹„ 1.1%</p>
        <p class="text-lg font-bold">í™˜ê²½ Environmental</p>
        <p class="text-2xl font-bold">55.2</p>
        <p class="text-xs text-gray-500">ì „ë…„ëŒ€ë¹„ â–² 1.1</p>
      </div>
      <div class="bg-blue-100 p-4 rounded shadow">
        <p class="text-sm text-gray-700">ê¸°ì¤€ëŒ€ë¹„ 40%</p>
        <p class="text-lg font-bold">ì‚¬íšŒ Social</p>
        <p class="text-2xl font-bold">73.9</p>
        <p class="text-xs text-gray-500">ì „ë…„ëŒ€ë¹„ â–² 17.7</p>
      </div>
      <div class="bg-purple-100 p-4 rounded shadow">
        <p class="text-sm text-gray-700">ê¸°ì¤€ëŒ€ë¹„ 47%</p>
        <p class="text-lg font-bold">ì§€ë°°êµ¬ì¡° Governance</p>
        <p class="text-2xl font-bold">80.6</p>
        <p class="text-xs text-gray-500">ì „ë…„ëŒ€ë¹„ â–² 2.8</p>
      </div>
    </div>
  </div>
</template>



<style scoped>
/* í•„ìš” ì‹œ ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
</style>